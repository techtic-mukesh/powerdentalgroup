<section class="built-section" style="background-color: {{ section.settings.background_color }};">
  <div class="page-width">
    <div class="built-header">
        <h2 class="built-swiper__title">{{ section.settings.section_title }}</h2>
        {{ section.settings.content }}
    </div>

    <div class="swiper-main" style="position: relative;">
         <div class="swiper built-swiper">
      <div class="swiper-wrapper">
        {% for block in section.blocks %}
        <div class="swiper-slide testimonial__slide">
          <div class="built__card">
              {% if block.settings.profile_image != blank %}
              <div class="built__card__image">
                <img src="{{ block.settings.profile_image | img_url: '' }}" alt="{{ block.settings.name | escape }}">
              </div>
              {% endif %}
          
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Swiper navigation -->
    <div class="swiper-button swiper-button-prev built-prev">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="34" viewBox="0 0 18 34" fill="none">
  <path d="M17 1L0.999999 17L17 33" stroke="#7A7A7A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
    </div>
    <div class="swiper-button swiper-button-next built-next">
     <svg xmlns="http://www.w3.org/2000/svg" width="18" height="34" viewBox="0 0 18 34" fill="none">
  <path d="M1 1L17 17L1 33" stroke="#7A7A7A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
    </div>


    <div class="swiper-pagination built-pagination"></div>


    </div>
    
   
  </div>
</section>

<style>
section.built-section {
    display: inline-block;
    width: 100%;
    padding: 43px 0 102px;
}

section.built-section .built-header {
    text-align: center;
    max-width: 705px;
    margin: 0 auto 30px;
}

section.built-section .built-header h2.built-swiper__title {
    margin: 0 0 15px;
    color: #010005;
    text-align: center;
    font-family: Montserrat;
    font-size: 34px;
    font-style: normal;
    font-weight: 700;
    line-height: normal;
    text-transform: uppercase;
}

section.built-section .built-header p {
    margin: 0;
    color: #01000A;
    text-align: center;
    font-family: Prompt;
    font-size: 14px;
    font-style: normal;
    font-weight: 300;
    line-height: 22px; /* 157.143% */
}

section.built-section .swiper-main {
    padding: 0 90px;
    max-width: 1095px;
    margin: 0 auto;
}

.built__card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    border-radius: 20px;
    aspect-ratio: 4/1.7;
        min-height: 487px;
}

section.built-section .swiper-button:after {
    display: none;
}

section.built-section .swiper-button {
    z-index: 1;
}

section.built-section .swiper-button svg {
    width: 16px;
    height: 32px;
}


section.built-section .swiper-pagination {
    display: none;
}


@media (max-width:991px) {
    section.built-section .swiper-button {
    display: none;
}

section.built-section .swiper-main {
    padding: 0;
}

.built__card__image img {
    min-height: 387px;
}

section.built-section {
    padding: 30px 0 50px;
}

section.built-section .built-header h2.built-swiper__title {
    font-size: 28px;
}

section.built-section .swiper-pagination {
    display: flex
;
    justify-content: center;
    bottom: -20px;
    z-index: 1;
}
    
}

</style>

{% schema %}
{
  "name": "Built Section",
  "settings": [
     {
        "type": "color",
        "id": "background_color",
        "label": "Background Color",
        "default": "#ffffff"
      },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "TESTIMONIALS"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "item",
      "settings": [
        {
          "type": "image_picker",
          "id": "profile_image",
          "label": "Profile Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Built Section"
    }
  ]
}
{% endschema %}

<script>
document.addEventListener("DOMContentLoaded", () => {
  const swiperEl = document.querySelector(".built-swiper");

  if (swiperEl) {
    const observer = new IntersectionObserver((entries, obs) => {
      if (entries[0].isIntersecting) {
        new Swiper(".built-swiper", {
          loop: true,
          slidesPerView: 1,
          spaceBetween: 30,
            effect: 'fade',          // Enable fade effect
          fadeEffect: {
            crossFade: true       // Smooth fade between slides
          },
          navigation: {
            nextEl: ".built-next",
            prevEl: ".built-prev"
          },
          pagination: {
            el: ".built-pagination",
            clickable: true,
          },
          breakpoints: {
            768: {
              slidesPerView: 1,
              spaceBetween: 30,
            },
            1024: {
              slidesPerView: 1,
              spaceBetween: 30,
            }
          }
        });
        obs.disconnect();
      }
    });
    observer.observe(swiperEl);
  }
});


</script>